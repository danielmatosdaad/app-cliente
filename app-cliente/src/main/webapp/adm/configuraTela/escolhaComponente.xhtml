<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:cf="http://url.projeto/componentes"
	xmlns:p="http://primefaces.org/ui"
	template="/WEB-INF/templates_proprietario/app_layout_content.xhtml">
	<ui:define name="processo">
		<script type="text/javascript">
    function handleDrop(event, ui) {
        var droppedFacelet = ui.draggable;
 
        droppedFacelet.fadeOut('fast');
    }
</script>
		<p:steps activeIndex="0" styleClass="custom">
			<p:menuitem value="Escolher" url="#" />
			<p:menuitem value="Configurar" url="#" />
			<p:menuitem value="Visualiar" url="#" />
			<p:menuitem value="Cadastrar" url="#" />
		</p:steps>
		<h:form id="faceletForm">
			<p:dataTable id="availableFacelets" var="facelet" scrollable="true" scrollHeight="150"
					value="#{escCpnTela.faceletsRegistrados}">
					<p:column style="width:20px">
						<h:outputText id="dragIcon" styleClass="ui-icon ui-icon-arrow-4" />
						<p:draggable for="dragIcon" revert="true" helper="clone" />
					</p:column>

					<p:column headerText="Componentes Personalizaveis">
						<h:outputText value="#{facelet.nomeMetadado}" />
					</p:column>
			</p:dataTable>
			
			<p:droppable for="selectedFacelet" tolerance="touch"
					activeStyleClass="ui-state-highlight"
					datasource="availableFacelets" onDrop="handleDrop">
					<p:ajax listener="#{escCpnTela.onFaceletDrop}"
						update="dropArea availableFacelets" />
			</p:droppable>
			<div style="clear: both; margin-top: 20px;"></div>
				<p:panel id="selectedFacelet"  header="Tela de Componentes"
					style="margin-top:30px; float:left; width:100%;">
					<p:outputPanel id="dropArea"
						style="margin-left: 5px; margin-rigth: 10px;float: left; width: 100%;">
						<h:outputText value="Arraste para essa area"
							rendered="#{empty escCpnTela.ctxConfMdo.faceletsEscolhidos}"
							style="font-size:24px;" />
						<p:dataTable id="selectedFaceletTable" var="facelet"
							value="#{escCpnTela.ctxConfMdo.faceletsEscolhidos}"
							rendered="#{not empty escCpnTela.ctxConfMdo.faceletsEscolhidos}"
							style="margin-left: 5px; margin-rigth: 5px;float: left;">
							<p:column headerText="Id" style="width:80%">
								<h:outputText value="#{facelet.nomeMetadado}" />
							</p:column>


							<p:column
								style="width:20px margin-left: 2px; margin-rigth: 2px; ">
								<p:commandButton value="remover" update="@form"
									icon="fa fa-remove"
									actionListener="#{escCpnTela.buttonActionRemoverComponente}">
									<f:setPropertyActionListener name="removerComponente"
										value="#{facelet}"
										target="#{escCpnTela.selecionaFaceletRemover}" />
								</p:commandButton>
							</p:column>
						</p:dataTable>
					</p:outputPanel>
				</p:panel>
			<div style="clear: both; margin-top: 20px;"></div>
			<p:commandButton value="Reiniciar" update="@form"
				actionListener="#{escCpnTela.reiniciar}">
			</p:commandButton>
		</h:form>


	</ui:define>

	<ui:define name="processo-menu-bar">
			<h:form>
				<p:button outcome="/adm/configuraTela/configuraComponente" value="Continuar"
					icon="fa fa-arrow-right">
				</p:button>
			</h:form>
	</ui:define>
</ui:composition>